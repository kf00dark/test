/*! iFrame Resizer (iframeSizer.min.js ) - v3.5.14 - 2017-03-30
 *  Desc: Force cross domain iframes to size to content.
 *  Requires: iframeResizer.contentWindow.min.js to be loaded into the target frame.
 *  Copyright: (c) 2017 David J. Bradshaw - dave@bradshaw.net
 *  License: MIT
 */
;
!function(aM){function aL(e,d,f){"addEventListener" in window?e.addEventListener(d,f,!1):"attachEvent" in window&&e.attachEvent("on"+d,f)
}function aK(e,d,f){"removeEventListener" in window?e.removeEventListener(d,f,!1):"detachEvent" in window&&e.detachEvent("on"+d,f)
}function aJ(){var d,c=["moz","webkit","o","ms"];
for(d=0;
d<c.length&&!Y;
d+=1){Y=window[c[d]+"RequestAnimationFrame"]
}Y||aF("setup","RequestAnimationFrame not supported")
}function aI(d){var c="Host page: "+d;
return window.top!==window.self&&(c=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+d:"Nested host page: "+d),c
}function aH(b){return ab+"["+aI(b)+"]"
}function aG(b){return W[b]?W[b].log:af
}function aF(d,c){aC("log",d,c,aG(d))
}function aE(d,c){aC("info",d,c,aG(d))
}function aD(d,c){aC("warn",d,c,!0)
}function aC(f,e,h,g){!0===g&&"object"==typeof window.console&&console[f](aH(e),h)
}function aB(aQ){function aP(){function d(){au(c),ax(b),q("resizedCallback",c)
}aN("Height"),aN("Width"),at(d,c,"init")
}function aO(){var d=h.substr(aa).split(":");
return{iframe:W[d[0]].iframe,id:d[0],height:d[1],width:d[2],type:d[3]}
}function aN(g){var f=Number(W[b]["max"+g]),w=Number(W[b]["min"+g]),l=g.toLowerCase(),k=Number(c[l]);
aF(b,"Checking "+l+" is in range "+w+"-"+f),w>k&&(k=w,aF(b,"Set "+l+" to min value")),k>f&&(k=f,aF(b,"Set "+l+" to max value")),c[l]=""+k
}function R(){function a(){function g(){var l=0,k=!1;
for(aF(b,"Checking connection is from allowed list of origins: "+e);
l<e.length;
l++){if(e[l]===f){k=!0;
break
}}return k
}function d(){var k=W[b].remoteHost;
return aF(b,"Checking connection is from: "+k),f===k
}return e.constructor===Array?g():d()
}var f=aQ.origin,e=W[b].checkOrigin;
if(e&&""+f!="null"&&!a()){throw new Error("Unexpected message received from: "+f+" for "+c.iframe.id+". Message was: "+aQ.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.")
}return !0
}function P(){return ab===(""+h).substr(0,aa)&&h.substr(aa).split(":")[0] in W
}function M(){var d=c.type in {"true":1,"false":1,undefined:1};
return d&&aF(b,"Ignoring init message from meta parent page"),d
}function s(d){return h.substr(h.indexOf(":")+ac+d)
}function p(d){aF(b,"MessageCallback passed: {iframe: "+c.iframe.id+", message: "+d+"}"),q("messageCallback",{iframe:c.iframe,message:JSON.parse(d)}),aF(b,"--")
}function o(){var e=document.body.getBoundingClientRect(),d=c.iframe.getBoundingClientRect();
return JSON.stringify({iframeHeight:d.height,iframeWidth:d.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(d.top-e.top,10),offsetLeft:parseInt(d.left-e.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset})
}function L(e,d){function f(){ar("Send Page Info","pageInfo:"+o(),e,d)
}ao(f,32)
}function K(){function g(e,d){function f(){W[k]?L(W[k].iframe,k):w()
}["scroll","resize"].forEach(function(a){aF(k,e+a+" listener for sendPageInfo"),d(window,a,f)
})
}function w(){g("Remove ",aK)
}function l(){g("Add ",aL)
}var k=b;
l(),W[k].stopPageInfo=w
}function J(){W[b]&&W[b].stopPageInfo&&(W[b].stopPageInfo(),delete W[b].stopPageInfo)
}function x(){var d=!0;
return null===c.iframe&&(aD(b,"IFrame ("+c.id+") not found"),d=!1),d
}function v(e){var d=e.getBoundingClientRect();
return ay(b),{x:Math.floor(Number(d.left)+Number(Z.x)),y:Math.floor(Number(d.top)+Number(Z.y))}
}function u(k){function g(){Z=l,t(),aF(b,"--")
}function z(){return{x:Number(c.width)+w.x,y:Number(c.height)+w.y}
}function y(){window.parentIFrame?window.parentIFrame["scrollTo"+(k?"Offset":"")](l.x,l.y):aD(b,"Unable to scroll to requested position, window.parentIFrame not found")
}var w=k?v(c.iframe):{x:0,y:0},l=z();
aF(b,"Reposition requested from iFrame (offset x:"+w.x+" y:"+w.y+")"),window.top!==window.self?y():g()
}function t(){!1!==q("scrollCallback",Z)?ax(b):aw()
}function r(k){function g(){var d=v(l);
aF(b,"Moving to in page link (#"+y+") at x: "+d.x+" y: "+d.y),Z={x:d.x,y:d.y},t(),aF(b,"--")
}function z(){window.parentIFrame?window.parentIFrame.moveToAnchor(y):aF(b,"In page link #"+y+" not found and window.parentIFrame not found")
}var y=k.split("#")[1]||"",w=decodeURIComponent(y),l=document.getElementById(w)||document.getElementsByName(w)[0];
l?g():window.top!==window.self?z():aF(b,"In page link #"+y+" not found")
}function q(e,d){return aA(b,e,d)
}function n(){switch(W[b].firstRun&&i(),c.type){case"close":az(c.iframe);
break;
case"message":p(s(6));
break;
case"scrollTo":u(!1);
break;
case"scrollToOffset":u(!0);
break;
case"pageInfo":L(W[b].iframe,b),K();
break;
case"pageInfoStop":J();
break;
case"inPageLink":r(s(9));
break;
case"reset":av(c);
break;
case"init":aP(),q("initCallback",c.iframe);
break;
default:aP()
}}function m(e){var d=!0;
return W[e]||(d=!1,aD(c.type+" No settings for "+e+". Message was: "+h)),d
}function j(){for(var d in W){ar("iFrame requested init",aq(d),document.getElementById(d),d)
}}function i(){W[b].firstRun=!1
}var h=aQ.data,c={},b=null;
"[iFrameResizerChild]Ready"===h?j():P()?(c=aO(),b=U=c.id,W[b].loaded=!0,!M()&&m(b)&&(aF(b,"Received: "+h),x()&&R()&&n())):aE(b,"Ignored: "+h)
}function aA(g,f,j){var i=null,h=null;
if(W[g]){if(i=W[g][f],"function"!=typeof i){throw new TypeError(f+" on iFrame["+g+"] is not a function")
}h=i(j)
}return h
}function az(d){var c=d.id;
aF(c,"Removing iFrame: "+c),d.parentNode&&d.parentNode.removeChild(d),aA(c,"closedCallback",c),aF(c,"--"),delete W[c]
}function ay(a){null===Z&&(Z={x:window.pageXOffset!==aM?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==aM?window.pageYOffset:document.documentElement.scrollTop},aF(a,"Get page position: "+Z.x+","+Z.y))
}function ax(b){null!==Z&&(window.scrollTo(Z.x,Z.y),aF(b,"Set page position: "+Z.x+","+Z.y),aw())
}function aw(){Z=null
}function av(d){function c(){au(d),ar("reset","reset",d.iframe,d.id)
}aF(d.id,"Size reset requested by "+("init"===d.type?"host page":"iFrame")),ay(d.id),at(c,d,"reset")
}function au(g){function f(a){g.iframe.style[a]=g[a]+"px",aF(g.id,"IFrame ("+h+") "+a+" set to "+g[a]+"px")
}function j(a){ae||"0"!==g[a]||(ae=!0,aF(h,"Hidden iFrame detected, creating visibility listener"),an())
}function i(b){f(b),j(b)
}var h=g.iframe.id;
W[h]&&(W[h].sizeHeight&&i("height"),W[h].sizeWidth&&i("width"))
}function at(e,d,f){f!==d.type&&Y?(aF(d.id,"Requesting animation frame"),Y(e)):e()
}function ar(t,s,r,q,p){function o(){var a=W[q].targetOrigin;
aF(q,"["+t+"] Sending msg to iframe["+q+"] ("+s+") targetOrigin: "+a),r.contentWindow.postMessage(ab+s,a)
}function n(){aD(q,"["+t+"] IFrame("+q+") not found")
}function m(){r&&"contentWindow" in r&&null!==r.contentWindow?o():n()
}function j(){function b(){!W[q]||W[q].loaded||h||(h=!0,aD(q,"IFrame has not responded within "+W[q].warningTimeout/1000+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ingored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))
}p&&W[q].warningTimeout&&(W[q].msgTimeout=setTimeout(b,W[q].warningTimeout))
}var h=!1;
q=q||r.id,W[q]&&(m(),j())
}function aq(b){return b+":"+W[b].bodyMarginV1+":"+W[b].sizeWidth+":"+W[b].log+":"+W[b].interval+":"+W[b].enablePublicMethods+":"+W[b].autoResize+":"+W[b].bodyMargin+":"+W[b].heightCalculationMethod+":"+W[b].bodyBackground+":"+W[b].bodyPadding+":"+W[b].tolerance+":"+W[b].inPageLinks+":"+W[b].resizeFrom+":"+W[b].widthCalculationMethod
}function ap(B,A){function z(){function d(e){1/0!==W[C][e]&&0!==W[C][e]&&(B.style[e]=W[C][e]+"px",aF(C,"Set "+e+" = "+W[C][e]+"px"))
}function c(e){if(W[C]["min"+e]>W[C]["max"+e]){throw new Error("Value for min"+e+" can not be greater than max"+e)
}}c("Height"),c("Width"),d("maxHeight"),d("minHeight"),d("maxWidth"),d("minWidth")
}function y(){var c=A&&A.id||T.id+ag++;
return null!==document.getElementById(c)&&(c+=ag++),c
}function v(c){return U=c,""===c&&(B.id=c=y(),af=(A||{}).log,U=c,aF(c,"Added missing iframe ID: "+c+" ("+B.src+")")),c
}function u(){switch(aF(C,"IFrame scrolling "+(W[C].scrolling?"enabled":"disabled")+" for "+C),B.style.overflow=!1===W[C].scrolling?"hidden":"auto",W[C].scrolling){case !0:B.scrolling="yes";
break;
case !1:B.scrolling="no";
break;
default:B.scrolling=W[C].scrolling
}}function r(){("number"==typeof W[C].bodyMargin||"0"===W[C].bodyMargin)&&(W[C].bodyMarginV1=W[C].bodyMargin,W[C].bodyMargin=""+W[C].bodyMargin+"px")
}function n(){var d=W[C].firstRun,c=W[C].heightCalculationMethod in X;
!d&&c&&av({iframe:B,height:0,width:0,type:"init"})
}function j(){Function.prototype.bind&&(W[C].iframe.iFrameResizer={close:az.bind(null,W[C].iframe),resize:ar.bind(null,"Window resize","resize",W[C].iframe),moveToAnchor:function(c){ar("Move to anchor","moveToAnchor:"+c,W[C].iframe,C)
},sendMessage:function(c){c=JSON.stringify(c),ar("Send Message","message:"+c,W[C].iframe,C)
}})
}function h(f){function c(){ar("iFrame.onload",f,B,aM,!0),n()
}aL(B,"load",c),ar("init",f,B,aM,!0)
}function b(c){if("object"!=typeof c){throw new TypeError("Options is not an object")
}}function a(d){for(var c in T){T.hasOwnProperty(c)&&(W[C][c]=d.hasOwnProperty(c)?d[c]:T[c])
}}function F(c){return""===c||"file://"===c?"*":c
}function E(c){c=c||{},W[C]={firstRun:!0,iframe:B,remoteHost:B.src.split("/").slice(0,3).join("/")},b(c),a(c),W[C].targetOrigin=!0===W[C].checkOrigin?F(W[C].remoteHost):"*"
}function D(){return C in W&&"iFrameResizer" in B
}var C=v(B.id);
D()?aD(C,"Ignored iFrame, already setup."):(E(A),u(),z(),r(),h(aq(C)),j())
}function ao(d,c){null===V&&(V=setTimeout(function(){V=null,d()
},c))
}function an(){function f(){function d(j){function i(a){return"0px"===W[j].iframe.style[a]
}function k(b){return null!==b.offsetParent
}k(W[j].iframe)&&(i("height")||i("width"))&&ar("Visibility change","resize",W[j].iframe,j)
}for(var c in W){d(c)
}}function e(a){aF("window","Mutation observed: "+a[0].target+" "+a[0].type),ao(f,16)
}function h(){var b=document.querySelector("body"),i={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},d=new g(e);
d.observe(b,i)
}var g=window.MutationObserver||window.WebKitMutationObserver;
g&&h()
}function am(d){function c(){ak("Window "+d,"resize")
}aF("window","Trigger event: "+d),ao(c,16)
}function al(){function b(){ak("Tab Visable","resize")
}"hidden"!==document.visibilityState&&(aF("document","Trigger event: Visiblity change"),ao(b,16))
}function ak(f,e){function h(b){return"parent"===W[b].resizeFrom&&W[b].autoResize&&!W[b].firstRun
}for(var g in W){h(g)&&ar(f,e,document.getElementById(g),g)
}}function aj(){aL(window,"message",aB),aL(window,"resize",function(){am("resize")
}),aL(document,"visibilitychange",al),aL(document,"-webkit-visibilitychange",al),aL(window,"focusin",function(){am("focus")
}),aL(window,"focus",function(){am("focus")
})
}function ai(){function a(g,e){function h(){if(!e.tagName){throw new TypeError("Object is not a valid DOM element")
}if("IFRAME"!==e.tagName.toUpperCase()){throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">")
}}e&&(h(),ap(e,g),d.push(e))
}function f(b){b&&b.enablePublicMethods&&aD("enablePublicMethods option has been removed, public methods are now always available in the iFrame")
}var d;
return aJ(),aj(),function(c,b){switch(d=[],f(c),typeof b){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(b||"iframe"),a.bind(aM,c));
break;
case"object":a(c,b);
break;
default:throw new TypeError("Unexpected data type ("+typeof b+")")
}return d
}
}function ah(b){b.fn?b.fn.iFrameResize||(b.fn.iFrameResize=function(d){function c(a,e){ap(e,d)
}return this.filter("iframe").each(c).end()
}):aE("","Unable to bind to jQuery, it is not fully loaded.")
}if("undefined"!=typeof window){var ag=0,af=!1,ae=!1,ad="message",ac=ad.length,ab="[iFrameSizer]",aa=ab.length,Z=null,Y=window.requestAnimationFrame,X={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},W={},V=null,U="Host Page",T={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5000,tolerance:0,widthCalculationMethod:"scroll",closedCallback:function(){},initCallback:function(){},messageCallback:function(){aD("MessageCallback function not defined")
},resizedCallback:function(){},scrollCallback:function(){return !0
}};
window.jQuery&&ah(window.jQuery),"function"==typeof define&&define.amd?define([],ai):"object"==typeof module&&"object"==typeof module.exports?module.exports=ai():window.iFrameResize=window.iFrameResize||ai()
}}();